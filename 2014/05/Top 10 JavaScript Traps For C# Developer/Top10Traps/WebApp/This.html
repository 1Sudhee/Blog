<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <title>JavaScript this keyword</title>

    <script type="text/javascript">

        // 1. this in Global context
        console.log(this);
        console.log(this.document == document);

        this.X = 99;
        console.log(this.X);

        this.Print = function() {
            console.log("In print");
        };
        
        console.log(this.Print); // return function definition

        Print(); // this will actually print the message

        this.Add = 1 + 2;
        console.log(this.Add);


        // 2. Function context

        function Test() {
            return this;
        }

        console.log(Test()); //window

        function TestStrict() {
            "use strict";
            return this;
        }
        console.log(TestStrict()); //undefined


        // 3. Object method

        var cust = {
            Id: 1,
            Name: "Prasad",
            Age: 35,
            GetNameAndAge: function() {
                return this.Name + ' ' + this.Age;
            }
        };
        console.log(cust.GetNameAndAge()); // this is set to cust object


        // 4. Constructor
        function Customer(name, age) {
            this.Name = name;
            this.Age = age;
            this.PrintCustomer = function() {
                console.log(this.Name);
            };
        }

        var c = new Customer('Colin', 40);
        c.PrintCustomer();

        // 5. call and apply
        
        function add(c, d){
            return this.a + this.b + c + d;
        }

        var o = {a:1, b:3};

        // The first parameter is the object to use as 'this', subsequent parameters are passed as 
        // arguments in the function call
        add.call(o, 5, 7); // 1 + 3 + 5 + 7 = 16

        // The first parameter is the object to use as 'this', the second is an array whose
        // members are used as the arguments in the function call
        add.apply(o, [10, 20]); // 1 + 3 + 10 + 20 = 34

    </script>
</head>
<body>

</body>
</html>